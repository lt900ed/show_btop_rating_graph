# これ何
機動戦士ガンダムバトルオペレーション2のレーティングマッチの結果を表示するhtmlです。
dataフォルダ内のcsvを手動更新するとグラフが自動更新されます。
OBS等の配信ソフトのブラウザソースに指定することを想定しています。


# v1.01以前の利用者の方へ
v1.02以降からデータはカンマ区切りのCSVファイルに入力するようになりました。
v1.01以前で使用していたTSVを流用する場合は、タブ文字を全て半角カンマ(,)に置き換え、拡張子を「csv」に変更して下さい。


# 含まれているもの
## graph_ground.html
地上レートの推移を表示します。`rating_log_ground.csv`の内容が反映されます。
グラフは5時始まりの今日の推移のみを表示します。


## graph_space.html
宇宙レートの推移を表示します。`rating_log_space.csv`の内容が反映されます。
グラフの仕様は`graph_ground.html`同様です。


## data/rating_log_ground.csv
地上レートの推移を記録します。初期状態で数戦進めた想定のサンプルデータが入ってます。
UTF-8 BOMなし CrLf改行で入力する必要があります。
メモ帳なら保存時に文字コードが「UTF-8」になっていれば大丈夫です。

戦闘終了時に、以下の情報を半角カンマで区切って入力します。
一列目：現在時刻
二列目：戦闘終了後のレート
三列目：0(v1.2以降では未使用のためダミー値)。

基本的にWindowsのメモ帳で入力されることを想定しています。現在時刻はF5で入力できます。


## data/rating_log_space.csv
宇宙レートの推移を記録します。仕様は`data/rating_log_ground.csv`同様です。

# 使い方
1. レートの初期値を入力する
とりあえず配信ソフトで映るか試したい場合は飛ばしてサンプルデータで進めて下さい。
data/rating_log_ground.csv(rating_log_space.csv)の2行目以降のサンプルデータを削除し、
現在時刻、現在のレート、0をカンマ区切りで入力する
csv全体が↓みたいな状態になってるとOK。「```」は不要。
```
datetime,score,is_last
03:59 2021/05/04,2603,0
```

2. 配信ソフトでgraph_ground.html(graph_space.html)をソースとしたブラウザソースを配置する
幅高さは480x272くらいを想定しています。が、基本16:9であればどの解像度でもレイアウトは崩れないはずです。
解像度を変更した場合は再読み込みを行って下さい。カスタムCSSは基本空欄にして下さい。

3. グラフが表示されることを確認する
うまく読み込まれれば即座にグラフが表示されるはずです。

4. 戦闘が終わるたびcsvに結果を追加する
新しい行に現在時刻、新しいレート、0を入力。csv全体が以下のようになってるとOK。
```
datetime,score,is_last
03:59 2021/05/04,2603,0
04:10 2021/05/04,2613,0
```
csvを上書き保存するとグラフに自動反映されます。
反映までの時間は最長で10秒かかります。


# バージョン
v1.2

# 作者
@lt900ed